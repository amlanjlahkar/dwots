#!/bin/sh

INTRFC="$(ip address | grep '.*wl.*' | cut -d: -f2 | head -n1)"
WINFO="$(iw dev ${INTRFC} link | awk -F: '/SSID/ {print $NF}')"

if [ -z "${WINFO}" ]; then 
    exit 2
        else
            PACMAN_UPDATE_COUNT="$(checkupdates | wc -l)"
            AUR_UPDATE_COUNT="$(yay -Qu | wc -l)"
            UPDATE_COUNT=$(("${PACMAN_UPDATE_COUNT}" + "${AUR_UPDATE_COUNT}"))
fi

[ "${PACMAN_UPDATE_COUNT}" -eq 0 ] && PACMAN_UPDATE_NOTIFY='' || PACMAN_UPDATE_NOTIFY="${PACMAN_UPDATE_COUNT}(P)/"
[ "${AUR_UPDATE_COUNT}" -eq 0 ] && AUR_UPDATE_NOTIFY='' || AUR_UPDATE_NOTIFY="${AUR_UPDATE_COUNT}(A)"

[ "${UPDATE_COUNT}" -eq 0 ] && printf "%s\n" "up-to-date" &> /dev/null || printf "%s\n" "ðŸ“¦ ${PACMAN_UPDATE_NOTIFY}${AUR_UPDATE_NOTIFY}" \
    && exit 0

