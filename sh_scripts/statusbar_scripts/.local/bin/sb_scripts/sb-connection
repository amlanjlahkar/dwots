#!/usr/bin/env bash

wlintrfc="$(ip address | grep '.*wl.*' | cut -d: -f2 | head -n1)"
wifinfo="$(iw dev ${wlintrfc} link | awk -F: '/SSID/ {print $NF}')"
#wlinfo="$(iwgetid -r)"
ethinfo="$(connmanctl technologies | head -n6 | grep 'Connected' | cut -d'=' -f2)"

use_color=1
case $ethinfo in
    ' False')
	    if [[ -z "$wifinfo" && "$use_color" -eq 1 ]]; then
            printf "%%{F#4a7140}%s%%{F#4d4e4c}%s%%{F-}\n" "${wlintrfc}  " "Disconnected"
        elif [[ -z "$wifinfo" && "$use_color" -ne 1 ]]; then
            printf "%s%s\n" "${wlintrfc}  " "Disconnected"
        elif [[ -n "$wifinfo" && "$use_color" -eq 1 ]]; then
            printf "%%{F#4a7140}%s%%{F-}%s\n" "${wlintrfc}  " "Connected to${wifinfo}"
        else
            printf "%s%s\n" "${wlintrfc}  " "Connected to${wifinfo}"
        fi
    ;;
    ' True')
        if [ "$use_color" -eq 1 ]; then
            printf "%%{F#4a7140}%s%%{F-}%s\n" "enp2s0  " "Connected"
        else
            printf "%s%s\n" "enp2s0  " "Connected"
        fi
    ;;
esac
