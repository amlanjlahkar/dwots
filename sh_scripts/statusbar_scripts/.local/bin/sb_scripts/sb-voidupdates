#!/usr/bin/env bash

intrfc="$(ip address | grep '.*wl.*' | cut -d: -f2 | head -n1)"
wifinfo="$(iw dev ${intrfc} link | awk -F: '/SSID/ {print $NF}')"

if [ -z "${wifinfo}" ]; then
    printf '%s\n' "  ğŸ“¦  sync failed  "
else
    # notify-send -t 3000 "syncing xbps repositories..."
    xbps_update_count="$(xbps-install -Mun 2>/dev/null | wc -l)"
    if [[ "$xbps_update_count" -gt 0 ]]; then
        printf '%s\n' "  ğŸ“¦  $xbps_update_count  "
    elif [[ "$xbps_update_count" -eq 0 ]]; then
        printf '%s\n' "  ğŸ“¦  up-to-date  "
    fi
fi


